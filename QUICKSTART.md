# 🚀 AutoAuth 快速使用指南

## ⚠️ 重要前提

**管理自动授权配置需要：**
1. ✅ 先登录账户（OAuth 登录）
2. ✅ 设备必须绑定到您的账户
3. ✅ 只有设备所有者可以管理配置

---

## 第一步：登录并绑定设备

1. **登录账户**
   - 在主页点击"登录"按钮
   - 选择 OAuth 提供者（GitHub、ZeroCat 等）
   - 完成 OAuth 授权

2. **绑定设备**
   - 登录成功后，在设备信息卡片上点击"绑定到账户"
   - 确认绑定操作

## 第二步：配置自动授权

1. **访问自动授权配置页面**
   - 在主页点击用户菜单 → "自动授权配置"
   - 或点击设备信息卡片上的"自动授权"按钮
   - 或在功能导航区域点击"自动授权配置"

2. **创建配置**
   - 点击"添加配置"按钮
   - 设置授权密码（可选）
   - 选择设备类型（教师/学生/班级一体机/家长）
   - 勾选"只读权限"（如需要）
   - 点击"创建"

## 第三步：测试授权

1. **访问 API 测试工具**
   - 在主页点击用户菜单 → "API 测试工具"
   - 或在功能导航区域点击"API 测试工具"

2. **获取 Token**
   - 切换到"获取 Token"标签
   - 输入设备的 namespace（通常是 UUID）
   - 输入刚才设置的授权密码
   - 输入应用 ID（默认自动生成）
   - 点击"执行测试"

3. **设置学生名称**（仅学生类型）
   - 切换到"学生名称"标签
   - Token 会自动从上一步填充
   - 输入学生姓名
   - 点击"执行测试"

4. **测试 KV 操作**
   - 切换到"KV 操作"标签
   - Token 会自动填充
   - 选择操作类型（LIST/GET/SET/DELETE）
   - 执行测试验证权限

## 常见场景

### 场景 1：班级使用

```plaintext
教师端：
1. 创建"教师"配置，密码：teacher2024，读写权限
2. 教师使用 namespace + teacher2024 登录

学生端：
1. 创建"学生"配置，密码：student2024，读写权限
2. 学生使用 namespace + student2024 登录
3. 学生设置自己的名称

家长端：
1. 创建"家长"配置，密码：parent2024，只读权限
2. 家长使用 namespace + parent2024 查看数据
```

### 场景 2：公开展示

```plaintext
1. 创建"班级一体机"配置，不设密码，只读权限
2. 大屏直接使用 namespace（无需密码）访问数据
```

## 注意事项

- ⚠️ 必须先登录账户并绑定设备
- ⚠️ 未绑定设备无法管理自动授权配置
- ⚠️ 同一设备的授权密码必须唯一
- 🔒 只读 token 无法执行 SET 和 DELETE 操作
- 👤 学生类型 token 需要先设置名称才能使用
- 🔑 无密码配置允许任何人访问（谨慎使用）

## 故障排查

**问题：无法创建配置**
- 解决：检查是否已存在相同密码的配置

**问题：获取 token 失败**
- 解决：确认 namespace 和密码是否正确

**问题：KV 操作失败**
- 解决：检查 token 是否为只读权限

---

**需要帮助？** 查看完整文档：[AUTOAUTH_README.md](./AUTOAUTH_README.md)
